# UI Design — TUI English Quest

## Purpose
Provide a concise, actionable design spec that aligns the terminal UI implementation with the visual mock (`moc/moc.tsx`) and give engineers a clear implementation plan and acceptance criteria.

## Scope
- Applies to the whole TUI (all screens under `internal/ui/`).
- Focus: colors, spacing, header/footer, status/HP bar, menu selection, boxed info panels, responsive behavior.

## References
- Mock: `moc/moc.tsx:1`
- Current UI examples:
  - Top/root: `internal/ui/top.go:75`
  - Status bar component: `internal/ui/components/statusbar.go:11`
  - Battle screen header/layout: `internal/ui/battle.go:74`
  - Town/home menu: `internal/ui/town.go:16`

## Design tokens (initial)
- Colors (hex):
  - Background: `#000000`
  - Primary (green): `#69F0AE`
  - Accent (yellow): `#FFD54F`
  - Danger (red): `#FF6B6B`
  - Info (cyan): `#4DD0E1`
  - Purple: `#CE93D8`
  - Orange: `#FFA726`
  - Muted text (gray): `#B0B0B0`
  - Box background (dark): `#071013`
  - Border / deep accent: `#1F3B2E`
- Spacing tokens:
  - PaddingSmall: `1`
  - PaddingMedium: `2`
  - PaddingLarge: `4`
- Sizes:
  - HPBar preferred max characters: dynamic by content width (fallback 10)
- Note: Use `lipgloss.Color("#...")` for all color tokens.

## Component primitives (APIs and behavior)
- `Header(s game.Stats, showStatus bool, width int) string`
  - Left: app title; right: condensed status line (Level / EXP / HP bar / Gold / Streak).
- `Footer(controls string, width int) string`
  - Small single-line control hints; remains fixed at bottom.
- `HPBar(current, max, width int) string`
  - Renders filled (`█`) and empty (`░`) segments, color changes by thresholds (<=25% red, <=50% orange, else green).
- `Box(title, content string, tone string, width int) string`
  - Bordered block with background tone (info/warning/danger).
- `Menu(items []string, selected int, cols int, width int) string`
  - Selected item: `> ` prefix + `Accent` foreground and selected background; non-selected: muted/primary text.

## File mapping (where to implement)
- New: `internal/ui/style/tokens.go` (centralize tokens)
- New: `internal/ui/components/header.go`, `footer.go`, `hpbar.go`, `box.go`, `menu.go`
- Modify to use the above:
  - `internal/ui/components/statusbar.go` — replace fixed HP logic with `HPBar`
  - `internal/ui/top.go`
  - `internal/ui/town.go`
  - `internal/ui/battle.go`
  - `internal/ui/dungeon.go`
  - `internal/ui/spelling.go`
  - `internal/ui/listening.go`
  - `internal/ui/tavern.go`
  - `internal/ui/equipment.go`
  - `internal/ui/analysis.go`
  - `internal/ui/history.go`
  - `internal/ui/status.go`
  - `internal/ui/messages.go`
  - `internal/ui/session.go`

## Implementation plan (stepwise)
1. Create tokens file `internal/ui/style/tokens.go`. (0.5–1h)
2. Implement core components in `internal/ui/components/`. (1.5–3h)
3. Replace `components/statusbar.go` HP code to use `HPBar`. (0.5–1h)
4. Update Top/Town to use Header/Menu/Box/Footers. (1–2h)
5. Apply components to other screens iteratively (one screen per commit). (4–8h total)
6. Add responsive adjustments: handle `tea.WindowSizeMsg` where needed. (1–2h)
7. Manual visual checks across widths and finishing touches. (1–2h)

Break work into small commits: each commit should touch at most one primitive and one or two screens.

## Branch / PR guidance
- Branch name: `feature/ui/moc-alignment`
- Commit granularity examples:
  - `ui(style): add design tokens`
  - `ui(component): add header and footer`
  - `ui(battle): apply hpbar and box styles`
- PR title: `UI: Align visuals with moc (colors, header, hpbar, menu)`
- PR body: include short summary, changed files list, testing steps, and screenshots.

## Acceptance criteria
- Header shows Level/EXP/HP/Gold/Streak in a single line (condensed) per mock.
- HP bar scales with screen width and changes color at defined thresholds.
- Menu selection is visually distinct (yellow accent + `> ` prefix + selected background).
- Boxed panels (tips, feedback) use consistent background and border tone.
- No layout regression on narrow (80 cols) and wide (>140 cols) terminals.
- `gofmt` compliant and `go build ./...` passes.

## Testing checklist
- Run: `go run ./cmd/english-quest`
- Verify:
  - Top -> Home -> Each mode displays correctly.
  - Toggle window width (80 / 120 / 140) and confirm layout holds.
  - HP threshold colors are visible.
  - Footer control hints readable and stable.
- Optional: capture screenshots to include in PR.

## Notes & tradeoffs
- Terminal font and terminal color support vary; hex colors via Lip Gloss are best-effort. Prioritize contrast and information hierarchy over pixel perfection.
- Start with tokens + primitives — biggest ROI and lowest risk.

---

Generated by the dev assistant.
